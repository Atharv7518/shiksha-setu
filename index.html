<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Shiksha Setu ‚Äî Prototype</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root{--brand:#ff6a00}
    body{font-family:Inter,system-ui,Arial,Helvetica,sans-serif;background:#f7f8fb}
    .brand{color:var(--brand)}
    .card{border-radius:12px}
    .language-toggle button{min-width:86px}
    .hidden{display:none}
    .ebook-word{cursor:pointer;text-decoration:underline dotted}
    .nav-pill{cursor:pointer}
    .small-muted{font-size:.85rem;color:#666}
  </style>
</head>
<body>
  <nav class="navbar navbar-expand bg-white shadow-sm mb-3">
    <div class="container-fluid">
      <span class="navbar-brand brand fw-bold">Shiksha Setu</span>
      <div class="d-flex gap-2 align-items-center">
        <div class="language-toggle btn-group" role="group">
          <button class="btn btn-outline-secondary" data-lang="en">English</button>
          <button class="btn btn-outline-secondary" data-lang="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</button>
          <button class="btn btn-outline-secondary" data-lang="pa">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</button>
        </div>
        <button id="notifBtn" class="btn btn-sm btn-light position-relative" title="Notifications">üîî<span id="notifCount" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger hidden">0</span></button>
        <div id="topUser" class="ms-2"></div>
      </div>
    </div>
  </nav>

  <div class="container" id="appRoot">
    <!-- Login / Register -->
    <div id="loginScreen" class="row justify-content-center">
      <div class="col-md-6">
        <div class="card p-4 shadow-sm">
          <h5 id="t_login_title">Login</h5>
          <p class="small-muted" id="t_login_sub">Simple login for Student / Teacher / Admin</p>
          <div class="mb-3">
            <label class="form-label" id="t_email">Email</label>
            <input id="inputEmail" class="form-control" type="email" placeholder="student@example.com">
          </div>
          <div class="mb-3">
            <label class="form-label" id="t_role">Role</label>
            <select id="selectRole" class="form-select">
              <option value="student">Student</option>
              <option value="teacher">Teacher</option>
              <option value="admin">Admin</option>
            </select>
          </div>
          <div class="d-flex gap-2">
            <button id="btnLogin" class="btn btn-primary">Login</button>
            <button id="btnDemo" class="btn btn-outline-secondary">Use Demo Account</button>
            <div class="ms-auto text-end small-muted">
              <div id="streakText"></div>
              <div id="t_lastlogin"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="hidden">
      <div class="row">
        <div class="col-md-3">
          <div class="card p-3 sticky-top" style="top:18px">
            <div class="d-flex align-items-center gap-2 mb-3">
              <div class="avatar bg-light rounded-circle p-2">üë§</div>
              <div>
                <div id="userName" class="fw-semibold">User</div>
                <div id="userRole" class="small-muted"></div>
              </div>
            </div>
            <ul class="nav flex-column">
              <li class="nav-item"><a class="nav-link nav-pill active" data-view="dashboard">Dashboard</a></li>
              <li class="nav-item"><a class="nav-link nav-pill" data-view="ebook">Interactive eBook</a></li>
              <li class="nav-item"><a class="nav-link nav-pill" data-view="lectures">Video Lectures</a></li>
              <li class="nav-item"><a class="nav-link nav-pill" data-view="quiz">Quizzes</a></li>
              <li class="nav-item"><a class="nav-link nav-pill" data-view="practice">Practice</a></li>
              <li class="nav-item"><a class="nav-link nav-pill" data-view="problems">Problem Solving</a></li>
              <li class="nav-item"><a class="nav-link nav-pill" data-view="courses">Computer Fundamentals</a></li>
              <li class="nav-item"><a class="nav-link nav-pill" data-view="teacher">Teacher Dashboard</a></li>
              <li class="nav-item"><a class="nav-link nav-pill" data-view="profile">Profile</a></li>
            </ul>
            <div class="mt-3">
              <button id="btnLogout" class="btn btn-outline-danger btn-sm w-100">Logout</button>
            </div>
          </div>
        </div>
        <div class="col-md-9">
          <div id="viewContainer">
            <!-- Dashboard -->
            <div id="view-dashboard" class="card p-3 mb-3">
              <div class="d-flex justify-content-between align-items-center">
                <h5 id="t_dashboard">Dashboard</h5>
                <div>
                  <small id="t_welcome">Welcome back!</small>
                </div>
              </div>
              <div class="row mt-3">
                <div class="col-md-4">
                  <div class="card p-3">
                    <div class="small-muted" id="t_progress">Your Progress</div>
                    <div class="mt-2"><div class="progress" style="height:10px"><div id="progressBar" class="progress-bar" role="progressbar" style="width:25%"></div></div></div>
                    <div class="mt-2 small-muted" id="progressText">25% complete</div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="card p-3">
                    <div class="small-muted" id="t_streak">Login Streak</div>
                    <div class="mt-2 fs-4" id="streakCount">0 üî•</div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="card p-3">
                    <div class="small-muted">Next Notification</div>
                    <div id="nextNotif" class="mt-2">No new notifications</div>
                  </div>
                </div>
              </div>

              <div class="mt-4">
                <h6 id="t_recommended">Recommended</h6>
                <div class="row" id="recommendedList"></div>
              </div>
            </div>

            <!-- Ebook -->
            <div id="view-ebook" class="card p-3 mb-3 hidden">
              <h5 id="t_ebook">Interactive eBook</h5>
              <p class="small-muted">Click any underlined word to see meaning & translation.</p>
              <div class="row">
                <div class="col-md-8">
                  <div class="card p-3 mb-3">
                    <h6 id="ebookTitle">Chapter 1: Our Planet</h6>
                    <p id="ebookContent">The <span class="ebook-word" data-word="planet">planet</span> Earth moves around the <span class="ebook-word" data-word="sun">Sun</span>. Life needs water and sunlight for survival.</p>
                    <div id="translationBox" class="mt-2 small-muted"></div>
                  </div>
                  <div class="card p-3">
                    <h6>Notes</h6>
                    <textarea id="notesArea" class="form-control" rows="4" placeholder="Teacher/Student notes"></textarea>
                    <div class="mt-2 text-end"><button id="saveNotes" class="btn btn-sm btn-primary">Save Notes</button></div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="card p-3">
                    <h6>Chapters</h6>
                    <ul id="chaptersList" class="list-unstyled small-muted">
                      <li><a href="#" class="chapter-link">Chapter 1</a></li>
                      <li><a href="#" class="chapter-link">Chapter 2</a></li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>

            <!-- Lectures -->
            <div id="view-lectures" class="card p-3 mb-3 hidden">
              <h5 id="t_lectures">Short Animated Lectures</h5>
              <p class="small-muted">Designed for lower grades ‚Äî short bites (2-6 min).</p>
              <div class="row" id="lecturesList">
                <!-- sample video card -->
                <div class="col-md-6 mb-3">
                  <div class="card p-2">
                    <h6>Animated: What is Earth?</h6>
                    <div class="ratio ratio-16x9">
                      <iframe src="https://www.youtube.com/embed/oqxAJKy0ii4" title="YouTube video" allowfullscreen></iframe>
                    </div>
                    <div class="mt-2 small-muted">Quiz after video</div>
                    <div class="mt-2"><button class="btn btn-sm btn-primary start-quiz" data-quiz="vid1">Take Quiz</button></div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Quiz -->
            <div id="view-quiz" class="card p-3 mb-3 hidden">
              <h5 id="t_quiz">Quizzes</h5>
              <div id="quizArea"></div>
            </div>

            <!-- Practice -->
            <div id="view-practice" class="card p-3 mb-3 hidden">
              <h5 id="t_practice">Extra Practice</h5>
              <p class="small-muted">Auto-generated practice problems.</p>
              <div class="mb-2"><button id="genProb" class="btn btn-sm btn-outline-primary">Generate Problem</button></div>
              <div id="practiceArea"></div>
            </div>

            <!-- Problems -->
            <div id="view-problems" class="card p-3 mb-3 hidden">
              <h5 id="t_problems">Problem Solving</h5>
              <p class="small-muted">Step-by-step problem solver (simple).</p>
              <div class="mb-2">
                <textarea id="problemInput" class="form-control" rows="3" placeholder="Describe the problem"></textarea>
                <div class="mt-2 text-end"><button id="solveProb" class="btn btn-sm btn-primary">Solve</button></div>
              </div>
              <div id="problemSolution"></div>
            </div>

            <!-- Courses -->
            <div id="view-courses" class="card p-3 mb-3 hidden">
              <h5 id="t_courses">Basic Computer Fundamentals</h5>
              <p class="small-muted">Beginner level course for students and a pathway for teachers.</p>
              <div id="coursesList" class="row"></div>
            </div>

            <!-- Teacher Dashboard -->
            <div id="view-teacher" class="card p-3 mb-3 hidden">
              <h5 id="t_teacher">Teacher Dashboard</h5>
              <p class="small-muted">Track student progress and give feedback.</p>
              <div id="teacherTracking"></div>
              <div class="mt-3">
                <h6>Teacher Level Test</h6>
                <div id="teacherTestArea"></div>
              </div>
            </div>

            <!-- Profile -->
            <div id="view-profile" class="card p-3 mb-3 hidden">
              <h5 id="t_profile">Profile</h5>
              <div class="row">
                <div class="col-md-6">
                  <label class="form-label">Display Name</label>
                  <input id="profileName" class="form-control">
                </div>
                <div class="col-md-6">
                  <label class="form-label">Preferred Language</label>
                  <select id="profileLang" class="form-select"><option value="en">English</option><option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option><option value="pa">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</option></select>
                </div>
              </div>
              <div class="mt-3 text-end"><button id="saveProfile" class="btn btn-primary">Save Profile</button></div>

              <div class="mt-4">
                <h6>Career Hierarchy</h6>
                <ol id="careerList">
                  <li>Student ‚Üí Learner Badge</li>
                  <li>Advanced Student ‚Üí Mentor Badge</li>
                  <li>Teacher Assistant ‚Üí Teacher</li>
                  <li>Senior Teacher ‚Üí Education Lead</li>
                </ol>
              </div>

              <div class="mt-3">
                <h6>Notifications & Feedback</h6>
                <textarea id="feedbackText" class="form-control" rows="3" placeholder="Send feedback"></textarea>
                <div class="mt-2 text-end"><button id="sendFeedback" class="btn btn-sm btn-outline-primary">Send</button></div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>

  <footer class="text-center small-muted mt-4 mb-4">Prototype ‚Äî Shiksha Setu (HTML/CSS/JS)</footer>

  <script>
    // --- Simple multilingual strings ---
    const LANG = 'en';
    const strings = {
      en:{login_title:'Login', login_sub:'Simple login for Student / Teacher / Admin', email:'Email', role:'Role', dashboard:'Dashboard', welcome:'Welcome back!', recommended:'Recommended', ebook:'Interactive eBook', lectures:'Short Animated Lectures', quiz:'Quizzes', practice:'Extra Practice', problems:'Problem Solving', courses:'Computer Fundamentals', teacher:'Teacher Dashboard', profile:'Profile', login:'Login', logout:'Logout'},
      hi:{login_title:'‡§≤‡•â‡§ó‡§ø‡§®', login_sub:'‡§∏‡•ç‡§ü‡•Ç‡§°‡•á‡§Ç‡§ü/‡§ü‡•Ä‡§ö‡§∞/‡§è‡§°‡§Æ‡§ø‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§∞‡§≤ ‡§≤‡•â‡§ó‡§ø‡§®', email:'‡§à‡§Æ‡•á‡§≤', role:'‡§≠‡•Ç‡§Æ‡§ø‡§ï‡§æ', dashboard:'‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°', welcome:'‡§´‡§ø‡§∞ ‡§∏‡•á ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à!', recommended:'‡§Ö‡§®‡•Å‡§∂‡§Ç‡§∏‡§ø‡§§', ebook:'‡§á‡§Ç‡§ü‡§∞‡•á‡§ï‡•ç‡§ü‡§ø‡§µ ‡§à‡§¨‡•Å‡§ï', lectures:'‡§≤‡§ò‡•Å ‡§è‡§®‡§ø‡§Æ‡•á‡§ü‡•á‡§° ‡§µ‡•ç‡§Ø‡§æ‡§ñ‡•ç‡§Ø‡§æ‡§®', quiz:'‡§ï‡•ç‡§µ‡§ø‡§ú‡§º', practice:'‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏', problems:'‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§∏‡§Æ‡§æ‡§ß‡§æ‡§®', courses:'‡§ï‡§Ç‡§™‡•ç‡§Ø‡•Ç‡§ü‡§∞ ‡§Æ‡•Ç‡§≤ ‡§¨‡§æ‡§§‡•á‡§Ç', teacher:'‡§∂‡§ø‡§ï‡•ç‡§∑‡§ï ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°', profile:'‡§™‡•ç‡§∞‡•ã‡§´‡§º‡§æ‡§á‡§≤', login:'‡§≤‡•â‡§ó‡§ø‡§®', logout:'‡§≤‡•â‡§ó‡§Ü‡§â‡§ü'},
      pa:{login_title:'‡®≤‡©å‡®ó‡®ø‡®®', login_sub:'‡®µ‡®ø‡®¶‡®ø‡®Ü‡®∞‡®•‡©Ä/‡®Ö‡®ß‡®ø‡®Ü‡®™‡®ï/‡®ê‡®°‡®Æ‡®ø‡®® ‡®≤‡®à ‡®∏‡®∞‡®≤ ‡®≤‡©å‡®ó‡®ø‡®®', email:'‡®à‡®Æ‡©á‡®≤', role:'‡®≠‡©Ç‡®Æ‡®ø‡®ï‡®æ', dashboard:'‡®°‡©à‡®∏‡®º‡®¨‡©ã‡®∞‡®°', welcome:'‡®µ‡®æ‡®™‡®∏ ‡®Ü‡®â‡®£ ‡®§‡©á ‡®∏‡©Å‡®Ü‡®ó‡®§ ‡®π‡©à!', recommended:'‡®∏‡©Å‡®ù‡®æ‡®Ö', ebook:'‡®á‡©∞‡®ü‡®∞‡®ê‡®ï‡®ü‡®ø‡®µ ‡®à‡®¨‡©Å‡©±‡®ï', lectures:'‡®õ‡©ã‡®ü‡©á ‡®ê‡®®‡©Ä‡®Æ‡©á‡®ü‡®° ‡®≤‡©à‡®ï‡®ö‡®∞', quiz:'‡®ï‡©Å‡®á‡®ú‡®º', practice:'‡®µ‡®ß‡©Ä‡®ï ‡®Ö‡®≠‡®ø‡®Ü‡®∏', problems:'‡®∏‡®Æ‡©±‡®∏‡®ø‡®Ü ‡®π‡©±‡®≤', courses:'‡®ï‡©∞‡®™‡®ø‡®ä‡®ü‡®∞ ‡®Æ‡©Ç‡®≤', teacher:'‡®Ö‡®ß‡®ø‡®Ü‡®™‡®ï ‡®°‡©à‡®∏‡®º‡®¨‡©ã‡®∞‡®°', profile:'‡®™‡©ç‡®∞‡©ã‡®´‡®æ‡®á‡®≤', login:'‡®≤‡©å‡®ó‡®ø‡®®', logout:'‡®≤‡©å‡®ó‡®Ü‡®ä‡®ü'}
    };

    // --- Utility: language state ---
    let appState = {lang:'en', user:null, notifications:[]};

    // --- DOM Helpers ---
    const $ = id=>document.getElementById(id);
    function setLang(l){ appState.lang=l; document.querySelectorAll('[data-lang]').forEach(b=>{b.classList.toggle('active', b.getAttribute('data-lang')===l)}); applyTranslations(); }
    function t(key){ return (strings[appState.lang] && strings[appState.lang][key]) || strings.en[key] || key }

    function applyTranslations(){
      document.getElementById('t_login_title').innerText = t('login_title');
      document.getElementById('t_login_sub').innerText = t('login_sub');
      document.getElementById('t_email').innerText = t('email');
      document.getElementById('t_role').innerText = t('role');
      document.getElementById('t_dashboard').innerText = t('dashboard');
      document.getElementById('t_welcome').innerText = t('welcome');
      document.getElementById('t_recommended').innerText = t('recommended');
      document.getElementById('t_ebook').innerText = t('ebook');
      document.getElementById('t_lectures').innerText = t('lectures');
      document.getElementById('t_quiz').innerText = t('quiz');
      document.getElementById('t_practice').innerText = t('practice');
      document.getElementById('t_problems').innerText = t('problems');
      document.getElementById('t_courses').innerText = t('courses');
      document.getElementById('t_teacher').innerText = t('teacher');
      document.getElementById('t_profile').innerText = t('profile');
      document.getElementById('btnLogin').innerText = t('login');
      document.getElementById('btnLogout').innerText = t('logout');
    }

    // Language buttons
    document.querySelectorAll('.language-toggle button').forEach(b=>{
      b.setAttribute('data-lang', b.getAttribute('data-lang'));
      b.addEventListener('click', ()=>{ setLang(b.getAttribute('data-lang')) });
    });

    // Nav handling
    document.querySelectorAll('.nav-pill').forEach(a=>a.addEventListener('click', (e)=>{
      document.querySelectorAll('.nav-pill').forEach(x=>x.classList.remove('active'));
      e.target.classList.add('active'); showView(e.target.getAttribute('data-view'));
    }));

    function showView(view){ document.querySelectorAll('[id^="view-"]').forEach(v=>v.classList.add('hidden')); const el = document.getElementById('view-'+view); if(el) el.classList.remove('hidden'); }

    // --- Simple auth (localStorage-backed demo) ---
    function loadState(){ const s = localStorage.getItem('shiksha_state'); if(s) appState = JSON.parse(s); applyTranslations(); updateNotifUI(); }
    function saveState(){ localStorage.setItem('shiksha_state', JSON.stringify(appState)); }
    loadState(); setLang(appState.lang || 'en');

    document.getElementById('btnDemo').addEventListener('click', ()=>{
      $('inputEmail').value = 'student1@example.com'; $('selectRole').value='student';
    });

    document.getElementById('btnLogin').addEventListener('click', ()=>{
      const email = $('inputEmail').value.trim(); const role = $('selectRole').value;
      if(!email){ alert('Please enter email'); return }
      const user = {email, role, name: email.split('@')[0], progress: Math.floor(Math.random()*60)+10};
      appState.user = user; // update streak
      updateLoginStreak();
      saveState(); enterApp();
    });

    function enterApp(){ $('loginScreen').classList.add('hidden'); $('mainApp').classList.remove('hidden'); renderUser(); renderDashboard(); }
    function renderUser(){ if(!appState.user) return; $('userName').innerText = appState.user.name; $('userRole').innerText = appState.user.role; $('topUser').innerText = appState.user.name; $('profileName').value = appState.user.name; $('profileLang').value = appState.lang; }

    document.getElementById('btnLogout').addEventListener('click', ()=>{ appState.user=null; saveState(); location.reload(); });

    // Login streaks
    function updateLoginStreak(){ const key = 'streak_'+(appState.user?.email||'anon'); const record = JSON.parse(localStorage.getItem(key) || '{}'); const today = new Date().toDateString(); if(record.last===today){/*same day*/} else {
      const yesterday = new Date(Date.now()-86400000).toDateString(); if(record.last===yesterday) record.count = (record.count||0)+1; else record.count = 1; record.last = today; localStorage.setItem(key, JSON.stringify(record));
    }
    $('streakCount').innerText = (JSON.parse(localStorage.getItem(key)).count||1)+ ' üî•'; $('streakText').innerText = 'Streak: '+ (JSON.parse(localStorage.getItem(key)).count||1)+' days'; }

    // Dashboard recommended
    function renderDashboard(){ const list = $('recommendedList'); list.innerHTML=''; const items = [{title:'Computer Basics',type:'course'},{title:'Numbers Practice',type:'practice'},{title:'Animated: Our Planet',type:'lecture'}]; items.forEach(it=>{ const col = document.createElement('div'); col.className='col-md-4 mb-3'; col.innerHTML=`<div class="card p-3"><div class="fw-semibold">${it.title}</div><div class="small-muted">${it.type}</div><div class="mt-2"><button class="btn btn-sm btn-outline-primary openRec" data-type="${it.type}" data-title="${it.title}">Open</button></div></div>`; list.appendChild(col); }); document.querySelectorAll('.openRec').forEach(b=>b.addEventListener('click', e=>{ const type = e.target.getAttribute('data-type'); if(type==='course') showView('courses'); else if(type==='practice') showView('practice'); else showView('lectures'); }));
      // progress bar
    if(appState.user) { const p = appState.user.progress || 25; $('progressBar').style.width = p+'%'; $('progressText').innerText = p+'% complete'; }
    // next notification
    $('nextNotif').innerText = appState.notifications.length? appState.notifications[0].text : 'No new notifications';
    }

    // Ebook interactions
    document.addEventListener('click', (e)=>{
      if(e.target.classList.contains('ebook-word')){
        const w = e.target.getAttribute('data-word'); showTranslation(w);
      }
    });
    const dictionary = {planet:{hi:'‡§ó‡•ç‡§∞‡§π', pa:'‡®ó‡©ç‡®∞‡®π‡®ø', en:'A large body moving in an orbit'}, sun:{hi:'‡§∏‡•Ç‡§∞‡§ú', pa:'‡®∏‡©Ç‡®∞‡®ú', en:'The star at center of solar system'}};
    function showTranslation(word){ const box = $('translationBox'); const d = dictionary[word]||{en:'(no data)'}; box.innerHTML = `<strong>${word}</strong> ‚Äî ${d[appState.lang]||d.en}`; }

    // Save notes
    $('saveNotes').addEventListener('click', ()=>{ const key='notes_ch1_'+(appState.user?.email||'guest'); localStorage.setItem(key, $('notesArea').value); alert('Notes saved locally') });

    // Lectures quiz trigger
    document.addEventListener('click', (e)=>{ if(e.target.classList.contains('start-quiz')){ const id = e.target.getAttribute('data-quiz'); openQuiz(sampleQuizzes.video1); showView('quiz'); } });

    // Simple quiz system
    const sampleQuizzes = {video1:[{q:'What does Earth orbit?', opts:['Sun','Moon','Mars'], a:0}], general:[{q:'2+2=?', opts:['3','4','5'], a:1}] , teacherTest:[{q:'What is HTTP?', opts:['Protocol','Language','Database'], a:0}] };
    function openQuiz(questions){ const area = $('quizArea'); area.innerHTML=''; let score=0; questions.forEach((qq, idx)=>{
      const div = document.createElement('div'); div.className='mb-3 p-2 border rounded'; div.innerHTML = `<div class="fw-semibold">Q${idx+1}. ${qq.q}</div>` + qq.opts.map((o,i)=>`<div><input type="radio" name="q${idx}"> ${o}</div>`).join('') + `<div class="mt-2"><button class="btn btn-sm btn-primary submitQ" data-idx="${idx}">Submit</button></div>`;
      area.appendChild(div);
    });
    area.addEventListener('click', function handler(e){ if(e.target.classList.contains('submitQ')){
      const idx = +e.target.getAttribute('data-idx'); const qblock = e.target.closest('div'); const radios = qblock.querySelectorAll('input[type=radio]'); let chosen=-1; radios.forEach((r,i)=>{ if(r.checked) chosen=i }); if(chosen===-1){ alert('Choose an option'); return } if(chosen===questions[idx].a){ alert('Correct'); score++; } else alert('Wrong'); if(idx===questions.length-1){ alert('Quiz done. Score: '+score+'/'+questions.length); area.removeEventListener('click', handler); }
    }});
    }

    // Practice generator
    $('genProb').addEventListener('click', ()=>{
      const a = Math.floor(Math.random()*20)+1; const b = Math.floor(Math.random()*20)+1; $('practiceArea').innerHTML = `<div class="card p-3">Compute: <strong>${a} + ${b}</strong> <div class="mt-2"><input id="ansPractice" class="form-control" placeholder="Your answer"> <div class="mt-2 text-end"><button id="checkPractice" class="btn btn-sm btn-primary">Check</button></div></div></div>`;
      document.getElementById('checkPractice').addEventListener('click', ()=>{ const val = Number($('ansPractice').value); if(val===a+b) alert('Correct!'); else alert('Try again. Correct is '+(a+b)); });
    });

    // Problem solver (very simple)
    $('solveProb').addEventListener('click', ()=>{
      const txt = $('problemInput').value.trim(); if(!txt) { $('problemSolution').innerText='Please describe the problem.'; return }
      // naive rules: if contains 'sum' or '+' perform
      if(/\+|sum|add/i.test(txt)){ const nums = txt.match(/\d+/g); if(nums && nums.length>=2){ const s = nums.reduce((a,b)=>a+Number(b),0); $('problemSolution').innerHTML = `<div class="card p-3">Solution (auto): ${nums.join(' + ')} = <strong>${s}</strong></div>` } else $('problemSolution').innerText='Could not parse numbers.' }
      else $('problemSolution').innerText='Try asking a simple arithmetic problem (e.g. "Add 12 + 5")';
    });

    // Courses list
    function renderCourses(){ const list = $('coursesList'); list.innerHTML=''; const courses = [{title:'Computer Basics',desc:'Intro to computer, OS, files'},{title:'Typing & MS-Word',desc:'Practical typing and documents'},{title:'Internet Safety',desc:'How to browse safely'}]; courses.forEach(c=>{ const col = document.createElement('div'); col.className='col-md-4 mb-3'; col.innerHTML = `<div class="card p-3"><div class="fw-semibold">${c.title}</div><div class="small-muted">${c.desc}</div><div class="mt-2"><button class="btn btn-sm btn-outline-primary enroll" data-title="${c.title}">Enroll</button></div></div>`; list.appendChild(col); }); document.querySelectorAll('.enroll').forEach(b=>b.addEventListener('click', e=>{ alert('Enrolled in '+e.target.getAttribute('data-title')) })); }

    // Teacher tracking (mock)
    function renderTeacher(){ const area = $('teacherTracking'); area.innerHTML = ''; const students = [{name:'student1',progress:30},{name:'student2',progress:70}]; students.forEach(s=>{ const div=document.createElement('div'); div.className='mb-2 p-2 border rounded'; div.innerHTML = `<div class="d-flex justify-content-between"><div>${s.name}</div><div>${s.progress}%</div></div><div class="progress mt-2" style="height:8px"><div class="progress-bar" style="width:${s.progress}%"></div></div>`; area.appendChild(div); });
      // teacher test
    const tt = $('teacherTestArea'); tt.innerHTML = ''; const q = sampleQuizzes.teacherTest[0]; tt.innerHTML = `<div class="mb-2 fw-semibold">${q.q}</div>` + q.opts.map((o,i)=>`<div><input type="radio" name="tt"> ${o}</div>`).join('') + `<div class="mt-2 text-end"><button id="submitTeacherTest" class="btn btn-sm btn-primary">Submit Test</button></div>`;
    document.getElementById('submitTeacherTest').addEventListener('click', ()=>{ const checked = document.querySelector('input[name=tt]:checked'); if(!checked){ alert('Choose'); return } const idx = Array.from(document.querySelectorAll('input[name=tt]')).indexOf(checked); if(idx===sampleQuizzes.teacherTest[0].a) alert('Result: Basic Level ‚Äî you qualify for Intermediate course'); else alert('Result: Please take Basic course'); }); }

    // Profile save
    $('saveProfile').addEventListener('click', ()=>{ appState.lang = $('profileLang').value; if(appState.user) appState.user.name = $('profileName').value; saveState(); alert('Profile saved'); renderUser(); applyTranslations(); });

    // Feedback
    $('sendFeedback').addEventListener('click', ()=>{ const v = $('feedbackText').value.trim(); if(!v) return alert('Type feedback'); appState.notifications.push({text:'Feedback received: '+v, date:new Date().toISOString()}); saveState(); updateNotifUI(); alert('Thank you for feedback') });

    // Notifications UI
    function updateNotifUI(){ const c = appState.notifications.length; const el = $('notifCount'); if(c>0){ el.innerText = c; el.classList.remove('hidden'); } else el.classList.add('hidden'); }
    $('notifBtn').addEventListener('click', ()=>{ if(appState.notifications.length===0) return alert('No notifications'); const list = appState.notifications.map(n=>n.text+' ('+new Date(n.date).toLocaleString()+')').join('\n---\n'); alert(list); appState.notifications = []; updateNotifUI(); saveState(); });

    // init views
    renderCourses(); renderTeacher();

    // If user exists, enter app
    if(appState.user){ enterApp(); }

    // Small helper: show english translation on load
    setTimeout(()=>{ if(!appState.user) setLang(appState.lang||'en') },100);
  </script>
</body>
</html>
